---
title: "TIL_191104"
date: "2019.11.04"
template: "post"
draft: false
slug: "/posts/til_191104/"
category: "TIL"
tags:
  - "datepicker"
  - "Project"
description: "Things I've learned through project"
socialImage: ""
---

## **React DatePicker**

날짜를 클릭하면 달력이 나오고, 시간도 선택할 수 있는 dropdown을 쉽게 만들 수 있는 라이브러리가 있다.

그 종류도 다양하지만 이번 프로젝트에서 사용한 datepicker는 `React-Datepicker`다.

사용법도 매우 간단해서 빠르게 만들기에 매우 용이하다.

```js
<DatePicker
  className="calender"
  selected={startDate}
  onChange={handleChange}
  dateFormat="yyyy d MMMM"
/>
```

위와 같이 작성하면 가장 기본적인 달력이 나온다.

`dateFomat` property를 사용하면 내가 원하는 대로 날짜 형식을 지정할 수 있다.

한 가지 생각해야 할 것은 달력에 표시될 날짜를 기본적으로 상태 관리를 해주면서 선택이 달라질 때마다 `this.setState`로 상태를 업데이트 해주어야 한다는 점이다.

```js
<DatePicker
  className="time"
  onChange={handleChange}
  selected={startDate}
  showTimeSelect
  showTimeSelectOnly
  timeIntervals={15}
  timeCaption="Time"
  dateFormat="aa h:mm"
/>
```

개인적으로 시간만 나오는 dropdown도 필요했기 때문에 위와 같은 코드를 함께 적어주었다. `showTimeSelect`를 사용하면 달력 뿐만 아니라 시간도 함께 선택할 수 있다. 그리고 `showTimeSelectOnly`를 사용하면 시간만 선택할 수도 있다.

## **React Dropzone으로 image 파일 업로드하기**

drag-drop으로 이미지 파일을 업로드할 수 있는 라이브러리가 있다. 이것 역시 여러가지가 있지만, 이번 프로젝트에 사용한 것은 `react-dropzone`이다.

우선 `yarn add react-dropzone`을 사용해 현재 사용하고 있는 프로젝트에 라이브러리를 추가해야 한다.

그리고 `react-dropzone`에서 `useDropzone`을 import 하면 된다. 우리는 `useDropzone`이 제공하는 메서드와 변수들을 활용해 커스터마이징 가능한 드롭존을 만들 수 있다.

```js
import { useDropzone } from "react-dropzone";

const Dropzone = ({ onDrop, accept }) => {
  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept
  });

  return (
    <div {...getRootProps()}>
      <input className="dropzone-input" {...getInputProps()} />
      <div className="text-center">
        {isDragActive ? (
          <p className="dropzone-content">Release to drop the files here</p>
        ) : (
          <p className="dropzone-content">
            Drag 'n' drop some files here, or click to select files
          </p>
        )}
      </div>
    </div>
  );
};
```

1. 먼저 `getRootProps()`는 드롭존의 가장 부모에게 주어지는 것으로써 이것을 활용해 가로 길이, 세로 길이 등을 정할 수 있다.
2. `getInputProps`는 input 엘리먼트에 주어지는 것으로써, 클릭 이벤트와 드래그 이벤트를 컨트롤할 수 있다. 업로드할 파일과 관련한 모든 옵션은 이 input 엘리먼트를 통해 제어할 수 있다. 예를 드러, 단 하나의 파일만 업로드하고 싶다면, `multiple: false`를 사용하면 된다.
3. `isDragActive`는 만약 파일이 드롭존 위로 드래그될 경우에 적용된다. 이것을 활용해 다양한 스타일을 줄 수도 있다.

```js
handleDrop = imgFile => {
  const reader = new FileReader();
  reader.readAsDataURL(imgFile[0]);
  reader.onload = e => {
    this.setState({ uploadedImage: e.target.result });
  };
};
```

onDrop 이벤트는 해당 컴포넌트를 사용하는 부모 컴포넌트에서 적용시켜야 한다. 드롭 이벤트가 발생하면 먼저 FileReader()를 사용해 해당 이미지 파일을 Data Url로 바꾸어주어야 한다. 그리고 사진이 로그될 때마다 미리 상태 관리하고 있던 이미지 url을 업데이트 시켜주면 된다.
