---
title: "TIL 191023"
date: "2019.10.23"
template: "post"
draft: false
slug: "/posts/til_191023/"
category: "TIL React Native"
tags:
  - "TIL"
  - "React Native"
  - "HTTP"
description: "What I learned today"
socialImage: ""
---

http request의 구조
startline target httpversion

header

- Headers
  해당 request에 대한 추가 정보(addtional information)를 담고 있는 부분.
  예를 들어, request 메세지 body의 총 길이 (Content-Length) 등.
  Key:Value 값으로 되어있다 (: 이 사용됨).
  key:value
  HOST: google.com => Key = HOST, Value = google.com
  Headers도 크게 3부분으로 나뉘지만(general headers, request headers, entity headers) 너무 자세한 부분임으로, 3부분 으로 구성되어 있다는것만 알고 있어도 괜찮다.
  자주 사용되는 header 정보에는 다음이 있다:
  Host
  요청이 전송되는 target의 host url: 예를 들어, google.com
  User-Agent
  요청을 보내는 클라이언트의 대한 정보: 예를 들어, 웹브라우저에 대한 정보.
  Accept
  해당 요청이 받을 수 있는 응답(response) 타입.
  Connection
  해당 요청이 끝난후에 클라이언트와 서버가 계속해서 네트워크 컨넥션을 유지 할것인지 아니면 끊을것인지에 대해 지시하는 부분.
  Content-Type
  해당 요청이 보내는 메세지 body의 타입. 예를 들어, JSON을 보내면 application/json.
  Content-Length:
  메세지 body의 길이.

body

원격으로 호출하기 위해 만드는 것이 api, 서버이다. 원격으로 호출하려고 서버를 찾아야하는데, 그때 주소가 필요하다. ip주소는 기억하기 힘들기 때문에 도메인 주소를 사용한다. 하지만 실제로는 도메인 주소도 ip주소로 변환되어 보내진다.  
google.com이라는 주소를 입력했다고 가정하면, 그것만으로는 충분하지 않다. 실질적인 주소를 알아야하기 때문에, Request Target이 필요하다.  
여기서 원격으로 호출되는 것, 그것을 EndPoint라고 한다. End는 호스트를 말하고, point는 그것에 있는 접점 중 하나를 이야기한다.

http response의 구조

Status Line
Response의 상태를 간략하게 나타내주는 부분.
3부분으로 구성되어 있다.

HTTP 버젼

Status code: 응답 상태를 나타내는 코드. 숫자로 되어 있는 코드.
예를 들어, 200

Status text: 응답 상태를 간략하게 설명해주는 부분.
예를 들어, "Not Found"

HTTP/1.1 404 Not Found
Headers
Response의 headers와 동일하다.
다만 response에서만 사용되는 header 값들이 있다.
예를 들어, User-Agent 대신에 Server 헤더가 사용된다.
Body
Response의 body와 일반적으로 동일하다.
Request와 마찬가지로 모든 response가 body가 있지는 않다. 데이터를 전송할 필요가 없을경우 body가 비어있게 된다.
HTTP/1.1 404 Not Found

Connection: close
Content-Length: 1573
Content-Type: text/html; charset=UTF-8
Date: Mon, 20 Aug 2018 07:59:05 GMT

```
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}
  </style>
  <a href=//www.google.com/><span id=logo aria-label=Google></span></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/payment-sync</code> was not found on this server.  <ins>That’s all we know.</ins>
```

자주 쓰이는 HTTP Status Code

200 OK
가장 자주 보게되는 status code.
문제없이 다 잘 실행 되었을때 보내는 코드.

301 Moved Permanently
해당 URI가 다른 주소로 바뀌었을때 보내는 코드.
HTTP/1.1 301 Moved Permanently
Location: http://www.example.org/index.asp

400 Bad Request
해당 요청이 잘못된 요청일대 보내는 코드.
주로 요청에 포함된 input 값들이 잘못된 값들이 보내졌을때 사용되는 코드.
예를 들어, 전화번호를 보내야 되는데 text가 보내졌을때 등등.

401 Unauthorized
유저가 해당 요청을 진행 할려면 먼저 로그인을 하거나 회원 가입을 하거나 등등이 필요하다는것을 나타내려 할때 쓰이는 코드.

403 Forbidden
유저가 해당 요청에 대한 권한이 없다는 뜻.
예를 들어, 오직 과금을 한 유저만 볼 수 있는 데이터를 요청 했을때 등.

404 Not Found
요청된 uri가 존재 하지 않는다는 뜻.
http -v google.com/no-such-uri

```
GET /no-such-uri HTTP/1.1
Accept: */*
Accept-Encoding: gzip, deflate
Connection: keep-alive
Host: google.com
User-Agent: HTTPie/0.9.3

HTTP/1.1 404 Not Found
Content-Length: 1572
Content-Type: text/html; charset=UTF-8
Date: Mon, 20 Aug 2018 08:46:48 GMT
Referrer-Policy: no-referrer
```

500 Internal Server Error
서버에서 에러가 났을때 사용되는 코드.
API 개발을 하는 백앤드 개발자들이 싫어하는 코드.

restful api 란, target주소를 작성할 때의 기준이다. 예를 들어,
`GET /user/1(특정 유저 정보 받기) POST /user(특정 유저 등록) GET /users(모든 유저 정보 받기) DELETE /user/1(특정 유저 삭제)`
request는 무조건 method로 한다. 동사는 쓰지 않는다.

url schema protocol host port tartget option
