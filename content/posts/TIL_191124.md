---
title: "TIL_191124"
date: "2019.11.24"
template: "post"
draft: false
slug: "/posts/til_191124/"
category: "TIL"
tags:
  - "Project"
  - "test"
description: "Things I've learned through project"
socialImage: ""
---

## **Intro**

node.js로 코드를 짜면서 기한에 맞추기 위해 내가 원하는 input에 원하는 output만 나오도록 했다.

비교적 초반에 짠 코드일수록, 리펙토링을 하거나 프로젝트가 진행되면서 추가되는 코드들 때문에 제대로 작동을 하지 않는 경우가 생겼다.

테스트를 하나씩 하면서 넘어가보고 싶었으나 node.js에 익숙해지는 데에도 시간이 걸렸고 테스트에 어떠한 라이브러리를 사용해야하는지, 처음부터 공부를 해야 했기 때문에 프로젝트가 끝난 시점에서라도 다시 테스트를 만들어보고 싶은 생각이 들었다.

## **mocha**

Mocha는 단순히 테스트를 실행하는 도구일 뿐이다. 어떠한 의미인지는 코드를 보면 조금 더 쉽게 이해할 수 있다.

terminal에서 테스트를 실행하는 명령어를 사용하기 위해 먼저 mocha를 global에 설치해주었다.

해당 프로젝트의 package.json에도 추가될 수 있도록 설치해준다.

```js
const assert = require("assert");

describe("sample test", function() {
  it("checks equality", function() {
    assert.equal(true, true);
  });
});
```

assert는 node.js 자체에 있는 라이브러리이다. 가장 기본적으로 mocha가 어떤 식으로 작동하는지 보기 위한 코드이다.

terminal에서 `mocha test`라는 명령어를 실행하면

```js
  sample test
    ✓ checks equality

  1 passing (6ms)
```

라는 응답이 온다. 내가 무슨 테스트를 실행했는지, 무엇을 확인하는 테스트인지를 정확하게 입력하는 것이 중요하다.

참고로 화살표 함수는 사용하지 않는다. 왜냐하면 mocha의 실행 컨텍스트 안에서 this로 접근하는 것이 가능한데 만약 화살표 함수를 쓴다면 해당 함수의 this 가 다른 함수에 종속될 수 있기 때문이다.

## **Chai**

chai는 assert와 똑같은 기능을 한다. 하지만 더 좋은 가독성을 제공한다.

```js
const chai = require("chai");
const expect = chai.expect;

describe("sample test", function() {
  it("checks equality", function() {
    expect(true).to.be.true;
  });
});
```

위와 같이 chai.expect를 사용해서 훨씬 가독성 높은 테스트를 작성할 수 있다.
