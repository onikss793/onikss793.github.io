---
title: "TIL_191109"
date: "2019.11.09"
template: "post"
draft: false
slug: "/posts/til_191109/"
category: "TIL"
tags:
  - "Project"
  - "Mongo DB"
description: "Things I've learned through project"
socialImage: ""
---

## **Mongo DB**

- Mongo DB는 대표적인 NoSQL 중 하나이다.

- NoSQL => Not Only SQL, 관계형 데이터 베이스처럼 고정된 스키마, JOIN이 존재하지 않는다.

- Document Oriented => 한 개 이상의 key-value pair로 이루어진 데이터 구조(객체의 형태)이다.
- 동적 Schema => 하나의 Collection 안의 document기리 다른 Schema를 가질 수 있다.

- Collection => RDMS의 테이블과 비슷한 역할이지만, 동적인 Schema를 가진다.

### **명령어**

- use _**database name**_ : Database 생성, 이미 존재하는 경우엔 현존하는 데이터 베이스 사용(db 로 현재 사용 중인 데이터 베이스 확인 가능)

- db._**colection**_.insert({ **_key_**: **_value_**, **_key_**: **_value_** }) : 데이터 베이스에 Document 추가

- db.dropDatabase() : Database를 제거할 때 사용(단, use **_database name_**으로 삭제하고자 하는 데이터 베이스를 먼저 선택해야 한다)

- db.createCollection(_**name**_, _**[options]**_) : Collection 생성할 때 사용

  - OPTIONS  
    **capped**  
     Boolean  
     true => Capped collection 을 활성화  
     Capped collection => 고정된 크기(fixed size) 를 가진 컬렉션으로서, size 가 초과되면 가장 오래된 데이터를 덮어쓴다.  
     이 값을 true로 설정하면 size 값을 반드시 설정해야 한다.  
    **autoIndex**  
     Boolean  
     true=> \_id 필드에 index를 자동으로 생성  
     기본값은 false  
    **size**  
     number  
     Capped collection 을 위해 해당 컬렉션의 최대 사이즈(maximum size)를 ~ bytes로 지정  
    **max**  
     number  
     해당 컬렉션에 추가할 수 있는 최대 갯수를 설정

- db._**collection name**_.drop() : Collection 제거할 때 사용

- db._**collection name**_.insert(_**document**_) : Document를 추가

- db._**collection name**_.find() : Collection의 Document 리스트를 확인할 때 사용

- db._**collection name**_.find(criteria, jusOne) : Document를 생성

- db._**collection name**_.remove(criteria) : Document를 제거(cretieria: {key: value}, jusOne: boolean)

#### Query 연산자

**\$eq** : (equals) 주어진 값과 일치하는 값  
**\$gt** : (greater than) 주어진 값보다 큰 값  
**\$gte** : (greather than or equals) 주어진 값보다 크거나 같은 값  
**\$lt** : (less than) 주어진 값보다 작은 값  
**\$lte** : (less than or equals) 주어진 값보다 작거나 같은 값  
**\$ne** : (not equal) 주어진 값과 일치하지 않는 값  
**\$in** : 주어진 배열 안에 속하는 값  
**\$nin** : 주어빈 배열 안에 속하지 않는 값

**\$or** : 주어진 조건중 하나라도 true 일 때 true  
**\$and** : 주어진 모든 조건이 true 일 때 true  
**\$not** : 주어진 조건이 false 일 때 true  
**\$nor** : 주어진 모든 조건이 false 일때 true

**regex**  
{ <field>: /pattern/<options> }  
 options : i(대소문자 무시), m(anchor^ 사용 시 \n이 있다면 무력화), x(whitespace 모두 무시), s(dot, 사용시 \n 을 포함해서 매치)

**where**
`db.articles.find( { $where: "this.comments.length == 0" } )`
articles라는 collection에서 comments field가 비어있는 Document를 조회
