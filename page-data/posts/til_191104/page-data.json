{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/til_191104/","webpackCompilationHash":"bade5310dfdc4ff5b635","result":{"data":{"markdownRemark":{"id":"b8f39f4b-620d-58f4-b049-895eb32332c0","html":"<h2 id=\"react-datepicker\"><a href=\"#react-datepicker\" aria-label=\"react datepicker permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>React DatePicker</strong></h2>\n<p>날짜를 클릭하면 달력이 나오고, 시간도 선택할 수 있는 dropdown을 쉽게 만들 수 있는 라이브러리가 있다.</p>\n<p>그 종류도 다양하지만 이번 프로젝트에서 사용한 datepicker는 <code class=\"language-text\">React-Datepicker</code>다.</p>\n<p>사용법도 매우 간단해서 빠르게 만들기에 매우 용이하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>DatePicker\n  className<span class=\"token operator\">=</span><span class=\"token string\">\"calender\"</span>\n  selected<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>startDate<span class=\"token punctuation\">}</span>\n  onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChange<span class=\"token punctuation\">}</span>\n  dateFormat<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy d MMMM\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>위와 같이 작성하면 가장 기본적인 달력이 나온다.</p>\n<p><code class=\"language-text\">dateFomat</code> property를 사용하면 내가 원하는 대로 날짜 형식을 지정할 수 있다.</p>\n<p>한 가지 생각해야 할 것은 달력에 표시될 날짜를 기본적으로 상태 관리를 해주면서 선택이 달라질 때마다 <code class=\"language-text\">this.setState</code>로 상태를 업데이트 해주어야 한다는 점이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>DatePicker\n  className<span class=\"token operator\">=</span><span class=\"token string\">\"time\"</span>\n  onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleChange<span class=\"token punctuation\">}</span>\n  selected<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>startDate<span class=\"token punctuation\">}</span>\n  showTimeSelect\n  showTimeSelectOnly\n  timeIntervals<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">15</span><span class=\"token punctuation\">}</span>\n  timeCaption<span class=\"token operator\">=</span><span class=\"token string\">\"Time\"</span>\n  dateFormat<span class=\"token operator\">=</span><span class=\"token string\">\"aa h:mm\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>개인적으로 시간만 나오는 dropdown도 필요했기 때문에 위와 같은 코드를 함께 적어주었다. <code class=\"language-text\">showTimeSelect</code>를 사용하면 달력 뿐만 아니라 시간도 함께 선택할 수 있다. 그리고 <code class=\"language-text\">showTimeSelectOnly</code>를 사용하면 시간만 선택할 수도 있다.</p>\n<h2 id=\"react-dropzone으로-image-파일-업로드하기\"><a href=\"#react-dropzone%EC%9C%BC%EB%A1%9C-image-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EA%B8%B0\" aria-label=\"react dropzone으로 image 파일 업로드하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>React Dropzone으로 image 파일 업로드하기</strong></h2>\n<p>drag-drop으로 이미지 파일을 업로드할 수 있는 라이브러리가 있다. 이것 역시 여러가지가 있지만, 이번 프로젝트에 사용한 것은 <code class=\"language-text\">react-dropzone</code>이다.</p>\n<p>우선 <code class=\"language-text\">yarn add react-dropzone</code>을 사용해 현재 사용하고 있는 프로젝트에 라이브러리를 추가해야 한다.</p>\n<p>그리고 <code class=\"language-text\">react-dropzone</code>에서 <code class=\"language-text\">useDropzone</code>을 import 하면 된다. 우리는 <code class=\"language-text\">useDropzone</code>이 제공하는 메서드와 변수들을 활용해 커스터마이징 가능한 드롭존을 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useDropzone <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dropzone\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Dropzone</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onDrop<span class=\"token punctuation\">,</span> accept <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> getRootProps<span class=\"token punctuation\">,</span> getInputProps<span class=\"token punctuation\">,</span> isDragActive <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDropzone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    onDrop<span class=\"token punctuation\">,</span>\n    accept\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">getRootProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>input className<span class=\"token operator\">=</span><span class=\"token string\">\"dropzone-input\"</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">getInputProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"text-center\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>isDragActive <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"dropzone-content\"</span><span class=\"token operator\">></span>Release to drop the files here<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>p className<span class=\"token operator\">=</span><span class=\"token string\">\"dropzone-content\"</span><span class=\"token operator\">></span>\n            Drag <span class=\"token string\">'n'</span> drop some files here<span class=\"token punctuation\">,</span> or click to select files\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol>\n<li>먼저 <code class=\"language-text\">getRootProps()</code>는 드롭존의 가장 부모에게 주어지는 것으로써 이것을 활용해 가로 길이, 세로 길이 등을 정할 수 있다.</li>\n<li><code class=\"language-text\">getInputProps</code>는 input 엘리먼트에 주어지는 것으로써, 클릭 이벤트와 드래그 이벤트를 컨트롤할 수 있다. 업로드할 파일과 관련한 모든 옵션은 이 input 엘리먼트를 통해 제어할 수 있다. 예를 드러, 단 하나의 파일만 업로드하고 싶다면, <code class=\"language-text\">multiple: false</code>를 사용하면 된다.</li>\n<li><code class=\"language-text\">isDragActive</code>는 만약 파일이 드롭존 위로 드래그될 경우에 적용된다. 이것을 활용해 다양한 스타일을 줄 수도 있다.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function-variable function\">handleDrop</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">imgFile</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsDataURL</span><span class=\"token punctuation\">(</span>imgFile<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> uploadedImage<span class=\"token punctuation\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>onDrop 이벤트는 해당 컴포넌트를 사용하는 부모 컴포넌트에서 적용시켜야 한다. 드롭 이벤트가 발생하면 먼저 FileReader()를 사용해 해당 이미지 파일을 Data Url로 바꾸어주어야 한다. 그리고 사진이 로그될 때마다 미리 상태 관리하고 있던 이미지 url을 업데이트 시켜주면 된다.</p>","fields":{"slug":"/posts/til_191104/","tagSlugs":["/tag/datepicker/","/tag/project/"]},"frontmatter":{"date":"2019.11.04","description":"Things I've learned through project","tags":["datepicker","Project"],"title":"TIL_191104","socialImage":""}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/til_191104/"}}}